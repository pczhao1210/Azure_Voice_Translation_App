# =================================================================
# Azure 实时语音翻译应用 - 环境变量配置模板
# =================================================================
# 
# 本文件包含所有可配置的环境变量及其说明
# 使用方法：复制此文件为 server/.env 并根据需要修改
#
# 📚 详细配置说明请参考：
# - 快速开始指南：docs/QUICK-START.md
# - 语音合成配置：docs/synthesis-config-examples.md
# - 语音分段策略：docs/SEGMENTATION_STRATEGY.md
#
# =================================================================

# -----------------------------------------------------------------
# 🖥️ 服务器基础配置
# -----------------------------------------------------------------

# 服务器运行端口
# 可在后端以 HTTP + WebSocket 服务的形式提供接口
PORT=3001

# -----------------------------------------------------------------
# 🎙️ Azure Speech 服务配置
# -----------------------------------------------------------------

# Azure Speech 服务密钥和区域
# 出于安全考虑，前端仍会提示用户手动输入 Key、Region
# 在开发环境中设置这些变量，前端会自动填充默认值
AZURE_SPEECH_KEY=请替换为AzureSpeechKey
AZURE_SPEECH_REGION=eastasia

# 语音合成输出格式（推荐使用默认值）
# 支持格式：Raw24Khz16BitMonoPcm, Riff16Khz16BitMonoPcm 等
DEFAULT_SPEECH_SDK_OUTPUT_FORMAT=Raw24Khz16BitMonoPcm

# -----------------------------------------------------------------
# 🌐 语言配置
# -----------------------------------------------------------------

# 默认源语音识别语言
# 使用完整 locale 代码，如 en-US（美式英语）、zh-CN（普通话）
# 参考：https://learn.microsoft.com/azure/ai-services/speech-service/language-support
DEFAULT_FROM_LANGUAGE=en-US

# 默认翻译目标语言
# 使用语言代码（非 locale），如 zh-Hans、en、fr
DEFAULT_TARGET_LANGUAGES=zh-Hans

# 默认语音合成音色
# 必须选择与目标语言一致的 Neural Voice
# 参考：https://learn.microsoft.com/azure/ai-services/speech-service/language-support?tabs=tts
DEFAULT_VOICE=zh-CN-XiaoxiaoNeural

# 自动语言检测候选列表（逗号分隔）
# 启用自动检测时的候选语言列表
DEFAULT_AUTO_DETECT_SOURCE_LANGUAGES=en-US,zh-CN,ja-JP,fr-FR,de-DE,es-ES,ko-KR

# -----------------------------------------------------------------
# 🎯 UI界面选项配置
# -----------------------------------------------------------------

# 前端支持的源语言选项（格式：code:显示名称）
SUPPORTED_FROM_LANGUAGES=en-US:英语 (美国),zh-CN:中文 (普通话),ja-JP:日语,fr-FR:法语,de-DE:德语,es-ES:西班牙语,it-IT:意大利语,pt-BR:葡萄牙语,ko-KR:韩语

# 前端支持的目标语言选项（格式：code:显示名称）
SUPPORTED_TARGET_LANGUAGES=en:英语,zh-Hans:中文 (简体),ja:日语,fr:法语,de:德语,es:西班牙语,it:意大利语,pt:葡萄牙语,ko:韩语

# -----------------------------------------------------------------
# ⚙️ Speech SDK 高级属性配置
# -----------------------------------------------------------------

# 基础 Speech SDK 属性（用于优化识别性能）
# 可根据需要调整，留空则使用 Azure 默认值
# 常用属性：
#   SpeechServiceConnection_EndSilenceTimeoutMs: 静音检测超时（毫秒）
#   SpeechServiceConnection_InitialSilenceTimeoutMs: 初始静音超时（毫秒）
#   SpeechServiceResponse_ProfanityOption: 脏话过滤 (Raw|Masked|Removed)
#   SpeechServiceResponse_StablePartialResultThreshold: 稳定结果阈值
#   SpeechServiceConnection_RecoMode: 识别模式 (INTERACTIVE|CONVERSATION|DICTATION)
DEFAULT_SPEECH_SDK_PROPERTIES=SpeechServiceConnection_EndSilenceTimeoutMs=800;SpeechServiceConnection_InitialSilenceTimeoutMs=5000;SpeechServiceResponse_ProfanityOption=Masked;SpeechServiceResponse_StablePartialResultThreshold=3;SpeechServiceConnection_RecoMode=INTERACTIVE

# -----------------------------------------------------------------
# 🎤 语音分段策略配置
# -----------------------------------------------------------------

# 默认分段策略：Semantic（语义分段，推荐）或 Silence（静音分段）
# 语义分段：基于AI检测标点符号和语义来分段，提供更自然的语义单元
# 静音分段：基于静音间隔检测来分段，传统方式，适合固定节奏的语音
# 详细说明：docs/SEGMENTATION_STRATEGY.md
DEFAULT_SEGMENTATION_STRATEGY=Semantic

# 语义分段配置（当策略为 Semantic 时使用）
# Speech_SegmentationStrategy: 启用语义分段模式
# Speech_SegmentationMaximumTimeMs: 最大分段时间，防止过长片段（可选）
SEMANTIC_SEGMENTATION_PROPERTIES=Speech_SegmentationStrategy=Semantic

# 静音分段配置（当策略为 Silence 时使用）
# Speech_SegmentationSilenceTimeoutMs: 静音超时时间（毫秒）
# SpeechServiceConnection_InitialSilenceTimeoutMs: 初始静音超时（毫秒）
SILENCE_SEGMENTATION_PROPERTIES=Speech_SegmentationSilenceTimeoutMs=500;SpeechServiceConnection_InitialSilenceTimeoutMs=20000

# -----------------------------------------------------------------
# 🎵 语音合成模式配置
# -----------------------------------------------------------------

# 默认合成模式：Quick（快速响应，推荐）或 Standard（标准响应）
# Quick: 检测到标点符号立即合成增量文本，提供实时反馈
# Standard: 等待完整识别结果才合成，确保准确性
# 详细配置说明：docs/synthesis-config-examples.md
DEFAULT_SYNTHESIS_MODE=Quick

# -----------------------------------------------------------------
# ⚡ 快速响应模式配置（当 DEFAULT_SYNTHESIS_MODE=Quick 时使用）
# -----------------------------------------------------------------

# 触发合成的标点符号列表（支持多语言）
# 中文标点：，。！？；：、
# 英文标点：,.!?;:
# 其他语言：․｡．！？；：｜、
# 配置影响：标点符号越多，合成越频繁，响应越快
QUICK_RESPONSE_PUNCTUATION=，。！？；：、,.!?;:․

# 最小合成长度（检测到标点符号时的最小字符数）
# 推荐值：2-5
# 较小值：反应更快，但可能产生过多短片段
# 较大值：合成片段较长，但响应较慢
QUICK_RESPONSE_MIN_LENGTH=3

# 增量合成间隔（两次合成之间的最小间隔，毫秒）
# 推荐值：300-800
# 较短间隔：响应更快，但CPU占用较高
# 较长间隔：降低系统负载，但响应较慢
QUICK_RESPONSE_INTERVAL_MS=500

# -----------------------------------------------------------------
# 📝 标准响应模式配置（当 DEFAULT_SYNTHESIS_MODE=Standard 时使用）
# -----------------------------------------------------------------

# 最小文本长度（完整识别结果触发合成的最小字符数）
# 推荐值：5-12
# 较小值：更频繁的合成，适合短句对话
# 较大值：减少合成次数，适合长文本场景
STANDARD_RESPONSE_MIN_LENGTH=8

# -----------------------------------------------------------------
# 📊 性能和调试配置
# -----------------------------------------------------------------

# 开发环境调试选项（生产环境建议关闭）
# 开启后会输出详细的合成和分段日志
DEBUG_SYNTHESIS=false
DEBUG_SEGMENTATION=false

# -----------------------------------------------------------------
# 🚀 常用配置预设
# -----------------------------------------------------------------
#
# 以下是一些常用场景的配置预设，可以直接复制使用：
#
# 🗣️ 实时客服场景（极快响应）:
# DEFAULT_SYNTHESIS_MODE=Quick
# QUICK_RESPONSE_PUNCTUATION=，。！？；：、,.!?;:․
# QUICK_RESPONSE_MIN_LENGTH=1
# QUICK_RESPONSE_INTERVAL_MS=300
#
# 🏢 商务会议场景（平衡配置，推荐）:
# DEFAULT_SYNTHESIS_MODE=Quick
# QUICK_RESPONSE_PUNCTUATION=，。！？；：、,.!?;:
# QUICK_RESPONSE_MIN_LENGTH=3
# QUICK_RESPONSE_INTERVAL_MS=500
#
# 🎤 演讲翻译场景（连贯性优先）:
# DEFAULT_SYNTHESIS_MODE=Quick
# QUICK_RESPONSE_PUNCTUATION=。！？.!?
# QUICK_RESPONSE_MIN_LENGTH=5
# QUICK_RESPONSE_INTERVAL_MS=800
#
# 📚 文档朗读场景（高质量）:
# DEFAULT_SYNTHESIS_MODE=Standard
# STANDARD_RESPONSE_MIN_LENGTH=10
#
# 🌐 多语言混合场景:
# DEFAULT_SYNTHESIS_MODE=Quick
# QUICK_RESPONSE_PUNCTUATION=，。！？；：、,.!?;:․｡．！？；：｜、
# QUICK_RESPONSE_MIN_LENGTH=3
# QUICK_RESPONSE_INTERVAL_MS=600
#
# -----------------------------------------------------------------
